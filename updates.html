<!DOCTYPE html>
<html lang="lt">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Visi atnaujinimai â€” Pagal mÄ—nesÄ¯</title>
    <link rel="stylesheet" href="assets/styles/colors.css" />
    <link rel="stylesheet" href="assets/styles/main.css" />
    <link rel="stylesheet" href="assets/styles/updates.css" />
</head>

<body class="dark-theme">
    <div class="page-wrapper">
        <button id="theme-toggle">Perjungti temÄ… ðŸ’¡</button>
        <div class="changelog-container">
            <h1>Sistemos atnaujinimai</h1>
            <div class="timeline"></div>
        </div>
    </div>
    </a>
    <a href="https://pocas-alt.github.io/pro-implant-how-to/" target="_self">
        <button id="back-to-proimplant-guide" class="back-to-proimplant-guide" title="GrÄ¯Å¾ti Ä¯ Pro-implant GidÄ…">GrÄ¯Å¾ti
            Ä¯
            Pro-implant GidÄ…</button>
    </a>
</body></a>
<script>
    document.getElementById('theme-toggle').addEventListener('click', () => {
        document.body.classList.toggle('light-theme');
        document.body.classList.toggle('dark-theme');
    });

    fetch('data/changelog.json')
        .then(res => res.json())
        .then(data => {
            const timeline = document.querySelector('.timeline');
            const months = {};

            data.forEach(entry => {
                const month = new Date(entry.date).toLocaleString('lt-LT', { month: 'long', year: 'numeric' });

                if (!months[month]) {
                    months[month] = document.createElement('div');
                    months[month].className = 'timeline-month';
                    months[month].innerHTML = `<h2>${month.charAt(0).toUpperCase() + month.slice(1)}</h2>`;
                    timeline.appendChild(months[month]);
                }

                const item = document.createElement('div');
                item.className = 'timeline-item';
                item.innerHTML = `
                        <div class="timeline-date">${entry.date}</div>
                        <section class="changelog-entry ${entry.tag}">
                            <div class="entry-header">
                                <span class="entry-tag ${entry.tag}">${tagLabel(entry.tag)}</span>
                            </div>
                            <h3 class="entry-title">${entry.title}</h3>
                            <p class="entry-description">${entry.description}</p>
                        </section>`;
                timeline.appendChild(item);
            });

            animateItems();
        });

    function tagLabel(tag) {
        const labels = {
            new: 'New',
            fix: 'Fix',
            update: 'Update',
            improvement: 'Improvement',
            future: 'Planned'
        };
        return labels[tag] || tag;
    }

    function animateItems() {
        const items = document.querySelectorAll('.timeline-month, .timeline-item');
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });
        items.forEach(item => observer.observe(item));
    }
</script>
<script>
    function animateItems() {
        const items = document.querySelectorAll('.timeline-month, .timeline-item');
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target); // fade-in only once
                }
            });
        }, { threshold: 0.1 });

        items.forEach(item => observer.observe(item));
    }

    // run after content is inserted
    document.addEventListener("DOMContentLoaded", animateItems);
</script>

</body>

</html>